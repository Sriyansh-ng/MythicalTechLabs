<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mythical Tech Labs - Game Hub</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <!-- Add Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">
  <!-- Modern UI font and theme overrides -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='theme.css') }}">
  <script defer src="{{ url_for('static', filename='tabs-inner.js') }}"></script>
  <script defer src="{{ url_for('static', filename='pong.js') }}"></script>
  <script defer src="{{ url_for('static', filename='hangman.js') }}"></script>
</head>
<body>
  <header>
    <img src="{{ url_for('static', filename='images/logo1.png') }}" alt="Mythical Studios Logo" class="logo">
    <h1>
      Mythical Tech Labs
    </h1>
  </header>

  <nav class="tabs">
    <button class="tablink gold" onclick="switchTab('gamehub', this)"><span class="icon">üéÆ</span>Game Hub</button>
    <button class="tablink gold" onclick="switchTab('quizhub', this)"><span class="icon">‚ùì</span>Quiz Hub</button>
    <button class="tablink gold" onclick="switchTab('utilityhub', this)"><span class="icon">üß∞</span>Utility Hub</button>
    <button class="tablink gold" onclick="switchTab('newshub', this)"><span class="icon">üì∞</span>News Hub</button>
    <button class="tablink" onclick="openTab('about')"><span class="icon">‚ÑπÔ∏è</span>About Us</button>
  </nav>
  <script>
    // Main hub active highlighter without breaking existing openTab()
    function switchTab(tabId, btn) {
      // Remove active from all top-level tabs and set on clicked
      try {
        document.querySelectorAll('nav.tabs .tablink').forEach(function (b) {
          b.classList.remove('active');
          b.removeAttribute('aria-current');
        });
        if (btn) {
          btn.classList.add('active');
          btn.setAttribute('aria-current', 'page');
        }
      } catch (e) {}

      // Delegate to existing tab logic if present
      if (typeof window.openTab === 'function') {
        window.openTab(tabId);
        return;
      }

      // Fallback: simple show/hide if openTab is not defined
      var all = document.querySelectorAll('.tabcontent');
      all.forEach(function (el) { el.style.display = 'none'; });
      var target = document.getElementById(tabId);
      if (target) target.style.display = 'block';
    }
  </script>

  <main>
    <!-- Game Hub with inner tabs -->
    <section id="gamehub" class="tabcontent">
      <nav class="inner-tabs">
        <button class="tablink gold" onclick="openInnerTab('snake')">Snake Game</button>
        <button class="tablink gold" onclick="openInnerTab('snl')">Snakes & Ladders</button>
        <button class="tablink gold" onclick="openInnerTab('tictactoe')">Tic Tac Toe</button>
        <button class="tablink gold" onclick="openInnerTab('wordsearch')">Word Search</button>
        <button class="tablink gold" onclick="openInnerTab('pong')">Pong</button>
        <button class="tablink gold" onclick="openInnerTab('hangman')">Hangman</button>
        <button class="tablink gold" onclick="openInnerTab('pacman')">Pac-Man</button>
      </nav>

      <!-- Snake Game -->
      <section id="snake" class="inner-tabcontent">
        <h2>Snake Game</h2>
        <canvas id="snakeCanvas" width="400" height="400"></canvas>
        <p id="snakeScore">Score: 0</p>

        <div class="snake-controls">
          <div class="dpad" role="group" aria-label="Snake controls">
            <div class="dpad-row dpad-row-top">
              <button class="dpad-btn up" onclick="setDirectionFromButton('UP')" aria-label="Up">‚Üë</button>
            </div>
            <div class="dpad-row dpad-row-middle">
              <button class="dpad-btn left" onclick="setDirectionFromButton('LEFT')" aria-label="Left">‚Üê</button>
              <button class="dpad-btn right" onclick="setDirectionFromButton('RIGHT')" aria-label="Right">‚Üí</button>
            </div>
            <div class="dpad-row dpad-row-bottom">
              <button class="dpad-btn down" onclick="setDirectionFromButton('DOWN')" aria-label="Down">‚Üì</button>
            </div>
          </div>
          <button class="btn-outline" onclick="restartSnake()">Restart</button>
        </div>
      </section>

      <!-- Snakes & Ladders -->
      <section id="snl" class="inner-tabcontent">
        <h2>Snakes & Ladders</h2>
        <canvas id="snlCanvas" width="400" height="400"></canvas>
        <button id="rollDiceBtn">Roll Dice</button>
        <button id="snlRestartBtn">Restart</button>
        <p id="diceResult">Roll to start the game!</p>
      </section>

      <!-- Tic Tac Toe -->
      <section id="tictactoe" class="inner-tabcontent">
        <h2>Tic Tac Toe</h2>
        <div id="tictactoeBoard" class="board"></div>
        <p id="tictactoeResult"></p>
        <button onclick="restartTicTacToe()">Restart</button>
      </section>

      <!-- Word Search -->
      <section id="wordsearch" class="inner-tabcontent">
        <h2>Word Search</h2>
        <div class="ws-container" style="display:flex; gap:16px; flex-wrap:wrap; align-items:flex-start;">
          <div id="wsGrid" aria-label="Word search grid" role="grid" style="display:grid; grid-template-columns:repeat(10,32px); grid-auto-rows:32px; gap:4px; user-select:none;"></div>
          <div class="ws-side" style="min-width:200px; max-width:260px;">
            <h3 style="margin: 0 0 8px 0;">Find these words</h3>
            <ul id="wsWordList" style="list-style: none; padding: 0; margin: 0 0 8px 0; display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 6px;"></ul>
            <div class="quiz-actions">
              <button id="wsNewBtn" class="btn-outline" type="button">New Puzzle</button>
            </div>
            <p id="wsStatus" style="margin:10px 0 0 0; font-weight:600;"></p>
          </div>
        </div>
      </section>

      <!-- Pong -->
      <section id="pong" class="inner-tabcontent">
        <h2>Pong</h2>
        <canvas id="pongCanvas" width="600" height="400"></canvas>
        <p id="pongScore">Player: 0 ‚Äî AI: 0</p>

        <div class="snake-controls">
          <div class="dpad" role="group" aria-label="Pong controls">
            <div class="dpad-row dpad-row-top">
              <button class="dpad-btn up"
                      onpointerdown="pongHold('UP')" onpointerup="pongStop()" onpointerleave="pongStop()" onpointercancel="pongStop()"
                      aria-label="Up" type="button">‚Üë</button>
            </div>
            <div class="dpad-row dpad-row-middle">
              <button class="dpad-btn left" disabled aria-label="Left" type="button">‚Üê</button>
              <button class="dpad-btn right" disabled aria-label="Right" type="button">‚Üí</button>
            </div>
            <div class="dpad-row dpad-row-bottom">
              <button class="dpad-btn down"
                      onpointerdown="pongHold('DOWN')" onpointerup="pongStop()" onpointerleave="pongStop()" onpointercancel="pongStop()"
                      aria-label="Down" type="button">‚Üì</button>
            </div>
          </div>
          <button class="btn-outline" onclick="restartPong()" type="button">Restart</button>
        </div>

        <p style="font-size:12px; color:#9ca3af; margin-top:6px;">Use ‚Üë/‚Üì arrow keys or the D‚ÄëPad to move.</p>
      </section>

      <!-- Hangman -->
      <section id="hangman" class="inner-tabcontent">
        <h2>Hangman</h2>
        <canvas id="hangmanCanvas" width="300" height="250"></canvas>
        <p id="hangmanMasked" style="font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; font-size: 20px; letter-spacing: 2px; margin: 8px 0;">_</p>
        <p id="hangmanWrong" class="muted" style="margin: 6px 0;">Wrong: ‚Äì</p>

        <div id="hangmanKeyboard" style="display:grid; grid-template-columns:repeat(13, minmax(0,1fr)); gap:6px; justify-items:stretch; margin: 10px auto; max-width: 620px;"></div>

        <div class="quiz-actions" style="flex-wrap: wrap;">
          <input id="hangmanWordGuess" type="text" inputmode="text" pattern="[A-Za-z]+" placeholder="Guess whole word" class="qr-input" style="max-width:280px;">
          <button class="btn-outline" type="button" onclick="hangmanGuessWord()">Guess</button>
          <button class="btn-gold" type="button" onclick="hangmanNewGame()">New Game</button>
        </div>

        <p id="hangmanMessage" class="muted" style="margin-top:6px;"></p>
      </section>

      <!-- Pac-Man -->
      <section id="pacman" class="inner-tabcontent">
        <h2>Pac-Man</h2>
        <canvas id="pacmanCanvas" width="448" height="448"></canvas>
        <p id="pacmanScore">Score: 0</p>

        <div class="snake-controls">
          <div class="dpad" role="group" aria-label="Pac-Man controls">
            <div class="dpad-row dpad-row-top">
              <button class="dpad-btn up" onclick="pacmanSetDirection('UP')" aria-label="Up" type="button">‚Üë</button>
            </div>
            <div class="dpad-row dpad-row-middle">
              <button class="dpad-btn left" onclick="pacmanSetDirection('LEFT')" aria-label="Left" type="button">‚Üê</button>
              <button class="dpad-btn right" onclick="pacmanSetDirection('RIGHT')" aria-label="Right" type="button">‚Üí</button>
            </div>
            <div class="dpad-row dpad-row-bottom">
              <button class="dpad-btn down" onclick="pacmanSetDirection('DOWN')" aria-label="Down" type="button">‚Üì</button>
            </div>
          </div>
          <button class="btn-outline" onclick="restartPacman()" type="button">Restart</button>
        </div>
        <script>
          // Robustly trigger the same path as keyboard controls
          (function () {
            function fireKey(target, detail) {
              try {
                const e = new KeyboardEvent('keydown', {
                  key: detail.key,
                  code: detail.code,
                  bubbles: true,
                  cancelable: true
                });
                // Some engines ignore keyCode/which on init; define getters
                try { Object.defineProperty(e, 'keyCode', { get: () => detail.keyCode }); } catch (_) {}
                try { Object.defineProperty(e, 'which', { get: () => detail.which }); } catch (_) {}
                target.dispatchEvent(e);
              } catch (_) {
                // Fallback generic event
                const e = new Event('keydown', { bubbles: true, cancelable: true });
                e.key = detail.key;
                e.code = detail.code;
                e.keyCode = detail.keyCode;
                e.which = detail.which;
                target.dispatchEvent(e);
              }
            }

            window.pacmanSetDirection = function (dir) {
              const map = {
                UP:    { key: 'ArrowUp',    code: 'ArrowUp',    keyCode: 38, which: 38 },
                DOWN:  { key: 'ArrowDown',  code: 'ArrowDown',  keyCode: 40, which: 40 },
                LEFT:  { key: 'ArrowLeft',  code: 'ArrowLeft',  keyCode: 37, which: 37 },
                RIGHT: { key: 'ArrowRight', code: 'ArrowRight', keyCode: 39, which: 39 }
              };
              const detail = map[dir];
              if (!detail) return;

              const canvas = document.getElementById('pacmanCanvas');
              const targets = [window, document];
              if (document.body) targets.push(document.body);
              if (canvas) targets.push(canvas);

              // Dispatch to multiple common listeners
              for (const t of targets) {
                fireKey(t, detail);
              }
            };
          })();
        </script>

        <p style="font-size:12px; color:#9ca3af; margin-top:6px;">Use arrow keys or the D‚ÄëPad to move.</p>
      </section>

    </section>

    <!-- Quiz Hub with inner tabs -->
    <section id="quizhub" class="tabcontent">
      <nav class="inner-tabs">
        <button class="tablink gold" onclick="openInnerTab('quizGeneral')">General Quiz</button>
        <button class="tablink gold" onclick="openInnerTab('quizScience')">Science Quiz</button>
        <button class="tablink gold" onclick="openInnerTab('quizHistory')">History Quiz</button>
        <button class="tablink gold" onclick="openInnerTab('quizMath')">Math Quiz</button>
      </nav>

      <section id="quizGeneral" class="inner-tabcontent">
        <h2>General Quiz</h2>

        <div id="quizSetup" class="quiz-setup">
          <p>Select a grade level to begin:</p>
          <select id="gradeSelect" class="quiz-select">
            <option value="" selected disabled>Choose grade</option>
            <option value="grade1">Grade 1</option>
            <option value="grade2">Grade 2</option>
            <option value="grade3">Grade 3</option>
          </select>
          <button id="startQuizBtn" class="btn-gold">Start Quiz</button>
        </div>

        <div id="quizContainer" class="quiz-container" style="display:none;">
          <div class="quiz-card">
            <div class="quiz-header">
              <span id="quizProgress">Question 1 of 5</span>
            </div>
            <h3 id="quizQuestion">Question text</h3>
            <div id="quizOptions" class="quiz-options">
              <!-- Options injected by JS -->
            </div>
            <div class="quiz-actions">
              <button id="quizSubmitBtn" class="btn-gold" disabled>Submit</button>
            </div>
          </div>
        </div>

        <div id="quizResult" class="quiz-result" style="display:none;">
          <h3>Round Complete!</h3>
          <p id="quizScore">You scored 0 out of 5.</p>
          <div id="quizReview" class="quiz-review" style="display:none;"></div>
          <div class="quiz-actions">
            <button id="quizPlayAgain" class="btn-gold">Play Again</button>
            <button id="quizChangeGrade" class="btn-outline">Change Grade</button>
          </div>
          <button class="btn-outline" onclick="restartSnake()">Restart</button>
        </div>
      </section>

      <section id="quizScience" class="inner-tabcontent">
        <h2>Science Quiz</h2>

        <div id="scienceQuizSetup" class="quiz-setup">
          <p>Select a grade level to begin:</p>
          <select id="scienceGradeSelect" class="quiz-select">
            <option value="" selected disabled>Choose grade</option>
            <option value="grade1">Grade 1</option>
            <option value="grade2">Grade 2</option>
            <option value="grade3">Grade 3</option>
          </select>
          <button id="scienceStartQuizBtn" class="btn-gold">Start Quiz</button>
        </div>

        <div id="scienceQuizContainer" class="quiz-container" style="display:none;">
          <div class="quiz-card">
            <div class="quiz-header">
              <span id="scienceQuizProgress">Question 1 of 5</span>
            </div>
            <h3 id="scienceQuizQuestion">Question text</h3>
            <div id="scienceQuizOptions" class="quiz-options">
              <!-- Options injected by JS -->
            </div>
            <div class="quiz-actions">
              <button id="scienceQuizSubmitBtn" class="btn-gold" disabled>Submit</button>
            </div>
          </div>
        </div>

        <div id="scienceQuizResult" class="quiz-result" style="display:none;">
          <h3>Round Complete!</h3>
          <p id="scienceQuizScore">You scored 0 out of 5.</p>
          <div id="scienceQuizReview" class="quiz-review" style="display:none;"></div>
          <div class="quiz-actions">
            <button id="scienceQuizPlayAgain" class="btn-gold">Play Again</button>
            <button id="scienceQuizChangeGrade" class="btn-outline">Change Grade</button>
          </div>
        </div>
      </section>

      <section id="quizHistory" class="inner-tabcontent">
        <h2>History Quiz</h2>

        <div id="historyQuizSetup" class="quiz-setup">
          <p>Select a grade level to begin:</p>
          <select id="historyGradeSelect" class="quiz-select">
            <option value="" selected disabled>Choose grade</option>
            <option value="grade1">Grade 1</option>
            <option value="grade2">Grade 2</option>
            <option value="grade3">Grade 3</option>
          </select>
          <button id="historyStartQuizBtn" class="btn-gold">Start Quiz</button>
        </div>

        <div id="historyQuizContainer" class="quiz-container" style="display:none;">
          <div class="quiz-card">
            <div class="quiz-header">
              <span id="historyQuizProgress">Question 1 of 5</span>
            </div>
            <h3 id="historyQuizQuestion">Question text</h3>
            <div id="historyQuizOptions" class="quiz-options">
              <!-- Options injected by JS -->
            </div>
            <div class="quiz-actions">
              <button id="historyQuizSubmitBtn" class="btn-gold" disabled>Submit</button>
            </div>
          </div>
        </div>

        <div id="historyQuizResult" class="quiz-result" style="display:none;">
          <h3>Round Complete!</h3>
          <p id="historyQuizScore">You scored 0 out of 5.</p>
          <div id="historyQuizReview" class="quiz-review" style="display:none;"></div>
          <div class="quiz-actions">
            <button id="historyQuizPlayAgain" class="btn-gold">Play Again</button>
            <button id="historyQuizChangeGrade" class="btn-outline">Change Grade</button>
          </div>
        </div>
      </section>

      <section id="quizMath" class="inner-tabcontent">
        <h2>Math Quiz</h2>

        <div id="mathQuizSetup" class="quiz-setup">
          <p>Select a grade level to begin:</p>
          <select id="mathGradeSelect" class="quiz-select">
            <option value="" selected disabled>Choose grade</option>
            <option value="grade1">Grade 1</option>
            <option value="grade2">Grade 2</option>
            <option value="grade3">Grade 3</option>
          </select>
          <button id="mathStartQuizBtn" class="btn-gold">Start Quiz</button>
        </div>

        <div id="mathQuizContainer" class="quiz-container" style="display:none;">
          <div class="quiz-card">
            <div class="quiz-header">
              <span id="mathQuizProgress">Question 1 of 5</span>
            </div>
            <h3 id="mathQuizQuestion">Question text</h3>
            <div id="mathQuizOptions" class="quiz-options">
              <!-- Options injected by JS -->
            </div>
            <div class="quiz-actions">
              <button id="mathQuizSubmitBtn" class="btn-gold" disabled>Submit</button>
            </div>
          </div>
        </div>

        <div id="mathQuizResult" class="quiz-result" style="display:none;">
          <h3>Round Complete!</h3>
          <p id="mathQuizScore">You scored 0 out of 5.</p>
          <div id="mathQuizReview" class="quiz-review" style="display:none;"></div>
          <div class="quiz-actions">
            <button id="mathQuizPlayAgain" class="btn-gold">Play Again</button>
            <button id="mathQuizChangeGrade" class="btn-outline">Change Grade</button>
          </div>
        </div>
      </section>
    </section>

    <!-- Utility Hub with inner tabs -->
    <section id="utilityhub" class="tabcontent">
      <nav class="inner-tabs">
        <button class="tablink gold" onclick="openInnerTab('qrgen')">QR Code Generator</button>
        <button class="tablink gold" onclick="openInnerTab('passgen')">Password Generator</button>
        <button class="tablink gold" onclick="openInnerTab('countdown')">Countdown Timer</button>
        <button class="tablink gold" onclick="openInnerTab('unitconv')">Unit Converter</button>
        <button class="tablink gold" onclick="openInnerTab('colorpal')">Color Palette</button>
      </nav>

      <section id="qrgen" class="inner-tabcontent">
        <h2>QR Code Generator</h2>
        <div class="qr-form">
          <input id="qrData" type="text" placeholder="Enter text or URL" class="qr-input" />
          <select id="qrSize" class="quiz-select">
            <option value="200">200 x 200</option>
            <option value="256" selected>256 x 256</option>
            <option value="300">300 x 300</option>
            <option value="350">350 x 350</option>
          </select>
          <div class="quiz-actions">
            <button id="qrGenerateBtn" class="btn-gold">Generate</button>
            <a id="qrDownloadBtn" class="btn-outline" href="#" download="qr.png">Download</a>
          </div>
        </div>
        <div id="qrOutput" class="qr-output" style="display:none;">
          <img id="qrImage" alt="Generated QR code">
        </div>
      </section>

      <section id="passgen" class="inner-tabcontent">
        <h2>Password Generator</h2>
        <div class="pw-form" style="display:grid; gap:12px; max-width:560px;">
          <div class="pw-row" style="display:block; width:100%;">
            <input id="pwOutput" type="text" class="qr-input" placeholder="Your new password will appear here" readonly style="width:100%; max-width:none; display:block;" />
          </div>
          <div class="pw-row-actions" style="display:flex; justify-content:flex-end; width:100%; margin-top:-4px; margin-bottom:6px;">
            <button id="pwCopyBtn" class="btn-outline" type="button" aria-label="Copy password" style="white-space:nowrap;">Copy</button>
          </div>

          <div style="display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap:10px;">
            <label style="display:flex; align-items:center; gap:8px;">
              <span>Length</span>
              <input id="pwLength" type="number" min="4" max="64" value="16" class="quiz-select" style="width:90px;">
            </label>

            <label style="display:flex; align-items:center; gap:8px;">
              <input id="pwAmbiguous" type="checkbox">
              <span>Avoid ambiguous (0/O, 1/l, etc.)</span>
            </label>

            <label style="display:flex; align-items:center; gap:8px;">
              <input id="pwLower" type="checkbox" checked>
              <span>Lowercase</span>
            </label>

            <label style="display:flex; align-items:center; gap:8px;">
              <input id="pwUpper" type="checkbox" checked>
              <span>Uppercase</span>
            </label>

            <label style="display:flex; align-items:center; gap:8px;">
              <input id="pwNumbers" type="checkbox" checked>
              <span>Numbers</span>
            </label>

            <label style="display:flex; align-items:center; gap:8px;">
              <input id="pwSymbols" type="checkbox" checked>
              <span>Symbols</span>
            </label>
          </div>

          <div class="quiz-actions">
            <button id="pwGenerateBtn" class="btn-gold" type="button">Generate Password</button>
          </div>

          <div id="pwStrength" style="font-size:12px; color:#374151;"></div>
        </div>
      </section>

      <section id="countdown" class="inner-tabcontent">
        <h2>Countdown Timer</h2>
        <div class="cd-wrap" style="display:grid; gap:14px; max-width:560px;">
          <div class="cd-row" style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
            <label style="display:flex; align-items:center; gap:6px;">
              <span>Minutes</span>
              <input id="cdMin" type="number" min="0" max="999" value="5" class="quiz-select" style="width:90px;">
            </label>
            <label style="display:flex; align-items:center; gap:6px;">
              <span>Seconds</span>
              <input id="cdSec" type="number" min="0" max="59" value="0" class="quiz-select" style="width:90px;">
            </label>
          </div>

          <div class="ws-timer" aria-live="polite" style="display:grid; gap:6px;">
            <div style="display:flex; align-items:center; justify-content:space-between;">
              <span style="font-weight:600; color:#111827;">Time</span>
              <span id="cdText" style="font-weight:800; letter-spacing:0.5px; color:#111827;">05:00</span>
            </div>
            <div class="ws-timer-bar" style="height:12px; background:#e5e7eb; border-radius:999px; overflow:hidden; box-shadow: inset 0 1px 2px rgba(0,0,0,0.08);">
              <div id="cdFill" style="height:100%; width:100%; background:linear-gradient(90deg,#10b981,#f59e0b,#ef4444); transition: width 0.25s linear;"></div>
            </div>
          </div>

          <div class="quiz-actions" style="display:flex; gap:10px; flex-wrap:wrap;">
            <button id="cdStart" class="btn-gold" type="button">Start</button>
            <button id="cdPause" class="btn-outline" type="button" disabled>Pause</button>
            <button id="cdReset" class="btn-outline" type="button">Reset</button>
          </div>
        </div>
      </section>

      <section id="unitconv" class="inner-tabcontent">
        <h2>Unit Converter</h2>
        <div class="uc-wrap" style="display:grid; gap:14px; max-width:640px;">
          <div class="uc-row" style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
            <label style="display:flex; align-items:center; gap:8px;">
              <span>Category</span>
              <select id="ucCategory" class="quiz-select">
                <option value="length">Length</option>
                <option value="weight">Weight</option>
                <option value="temperature">Temperature</option>
              </select>
            </label>

            <label style="display:flex; align-items:center; gap:8px;">
              <span>Value</span>
              <input id="ucValue" type="number" class="qr-input" placeholder="Enter value" style="width:140px;">
            </label>
          </div>

          <div class="uc-row" style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
            <label style="display:flex; align-items:center; gap:8px;">
              <span>From</span>
              <select id="ucFrom" class="quiz-select"></select>
            </label>

            <button id="ucSwap" class="btn-outline" type="button" aria-label="Swap units">Swap</button>

            <label style="display:flex; align-items:center; gap:8px;">
              <span>To</span>
              <select id="ucTo" class="quiz-select"></select>
            </label>
          </div>

          <div class="quiz-actions">
            <button id="ucConvert" class="btn-gold" type="button">Convert</button>
          </div>

          <div class="uc-result" style="display:grid; gap:8px;">
            <label style="display:flex; align-items:center; gap:8px;">
              <span>Result</span>
              <input id="ucResult" type="text" class="qr-input" placeholder="Converted value" readonly style="flex:1 1 auto; max-width:none;">
            </label>
            <div class="quiz-actions" style="justify-content:flex-end;">
              <button id="ucCopy" class="btn-outline" type="button">Copy</button>
            </div>
          </div>
        </div>
      </section>

      <section id="colorpal" class="inner-tabcontent">
        <h2>Color Palette</h2>
        <div class="uc-wrap" style="display:grid; gap:14px; max-width:860px;">
          <div class="uc-row" style="display:flex; gap:12px; flex-wrap:wrap; align-items:center;">
            <label style="display:flex; align-items:center; gap:8px;">
              <span>Base</span>
              <input id="cpBase" type="color" class="quiz-select" value="#ffeb3b" style="width:56px; height:38px; padding:0;">
            </label>

            <label style="display:flex; align-items:center; gap:8px;">
              <span>Colors</span>
              <input id="cpCount" type="number" min="3" max="10" value="5" class="quiz-select" style="width:90px;">
            </label>

            <label style="display:flex; align-items:center; gap:8px;">
              <span>Scheme</span>
              <select id="cpScheme" class="quiz-select">
                <option value="monochrome">Monochrome</option>
                <option value="analogous">Analogous</option>
                <option value="complementary" selected>Complementary</option>
                <option value="triadic">Triadic</option>
                <option value="split">Split-Complementary</option>
                <option value="tetradic">Tetradic</option>
              </select>
            </label>
          </div>

          <div class="quiz-actions" style="display:flex; gap:10px; flex-wrap:wrap;">
            <button id="cpGenerate" class="btn-gold" type="button">Generate</button>
            <button id="cpRandom" class="btn-outline" type="button">Randomize</button>
          </div>

          <div id="cpOutput" class="cp-grid" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); gap:12px;">
            <!-- Swatches injected by JS -->
          </div>
        </div>
      </section>
    </section>

    <!-- News Hub -->
    <section id="newshub" class="tabcontent">
      <h2>News Hub</h2>
      <div class="news-form" style="display:grid; gap:12px; max-width:560px;">
        <input id="newsQuery" type="text" class="qr-input" placeholder="Search news category (e.g., sports, politics, technology)" />
        <div class="quiz-actions">
          <button id="newsSearchBtn" class="btn-gold" type="button">Search News</button>
          <button id="newsLuckyBtn" class="btn-outline" type="button">I'm Feeling Curious</button>
        </div>
        <p style="color:#e0e0e0; font-size:0.9rem; margin:0;">
          Opens a pop-up with the latest results for your category.
        </p>
      </div>
    </section>

    <!-- About Us -->
    <section id="about" class="tabcontent">
      <h2>About Us</h2>
      <p>
        <strong>Mythical Tech Labs</strong> - We develop games, quizzes and utilities for all age groups that are easy and fun to play with.
        Contact us at mythicalStudios12@gmail.com to provide us with suggestions and feedback.
      </p>
    </section>
  </main>

  <!-- Site hit counter (bottom-right) -->
  <div class="hit-counter" role="status" aria-live="polite" title="Total site visits">
    <span class="hit-eye" aria-hidden="true">üëÅÔ∏è</span>
    <span class="hit-label">Visits</span>
    <strong class="hit-number">{{ hit_count }}</strong>
  </div>

  <!-- JS files -->
  <script src="{{ url_for('static', filename='snake.js') }}"></script>
  <script src="{{ url_for('static', filename='snl.js') }}"></script>
  <script src="{{ url_for('static', filename='tictactoe.js') }}"></script>
  <script src="{{ url_for('static', filename='wordsearch.js') }}"></script>
  <script src="{{ url_for('static', filename='quiz.js') }}"></script>
  <script src="{{ url_for('static', filename='science_quiz.js') }}"></script>
  <script src="{{ url_for('static', filename='math_quiz.js') }}"></script>
  <script src="{{ url_for('static', filename='utility.js') }}"></script>
  <script src="{{ url_for('static', filename='password.js') }}"></script>
  <script src="{{ url_for('static', filename='countdown.js') }}"></script>
  <script src="{{ url_for('static', filename='unit_converter.js') }}"></script>
  <script src="{{ url_for('static', filename='color_palette.js') }}"></script>
  <script src="{{ url_for('static', filename='news.js') }}"></script>
  <script src="{{ url_for('static', filename='history_quiz.js') }}"></script>
  <script src="{{ url_for('static', filename='pacman.js') }}"></script>

  <script>
    function openTab(tabName) {
      const tabs = document.querySelectorAll('.tabcontent');
      tabs.forEach(tab => tab.style.display = "none");
      const target = document.getElementById(tabName);
      if (target) {
        target.style.display = "block";
        // If the opened tab has inner tabs, auto-open the first one if none is visible
        const innerTabs = target.querySelectorAll('.inner-tabcontent');
        if (innerTabs.length > 0) {
          const anyVisible = Array.from(innerTabs).some(el => el.style.display === 'block');
          if (!anyVisible) {
            innerTabs.forEach(el => el.style.display = 'none');
            innerTabs[0].style.display = 'block';
          }
        }
      }
    }

    function openInnerTab(tabName) {
      const innerTabs = document.querySelectorAll('.inner-tabcontent');
      innerTabs.forEach(tab => tab.style.display = "none");
      const target = document.getElementById(tabName);
      if (target) target.style.display = "block";
    }

    // Show Game Hub and default inner tab
    openTab('gamehub');
    openInnerTab('snake');
  </script>

  <!-- Inline CSS for hit counter badge -->
  <style>
    .hit-counter {
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 9999;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      font: 600 13px/1.2 'Poppins', 'Segoe UI', sans-serif;
      color: #0b0f19;
      background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.88));
      border: 1px solid rgba(255,255,255,0.7);
      border-radius: 999px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.22);
      backdrop-filter: blur(6px) saturate(120%);
      -webkit-backdrop-filter: blur(6px) saturate(120%);
    }
    .hit-counter .hit-eye { font-size: 16px; }
    .hit-counter .hit-label { color: #374151; letter-spacing: 0.2px; }
    .hit-counter .hit-number { color: #111827; font-weight: 700; }
    @media (max-width: 480px) {
      .hit-counter {
        right: 10px;
        bottom: 10px;
        padding: 6px 10px;
        font-size: 12px;
        gap: 6px;
      }
    }
  </style>
</body>
</html>
